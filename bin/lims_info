#!/usr/bin/env ruby
# -*- mode: ruby -*-

require 'lims_info'

module LimsInfo
  module Executable
    HELP = <<-HELP
    lims_info: providing the information you need from LIMs
    Usage: lims_info [COMMAND] <PARAMETERS>

    lims_info Commands:
      version    - Print version number and exits
      help       - Print this help and exits

      order (-o) - Given an order_id, prints relevant flowcell 
                   information. order_id should be in the form:
                   MOLNG-123 or just the number 123

      user (-u)  - Given a users login (their initials), prints
                   all orders requested by this user

    HELP
    def self.execute(command, args)
      case command
      when 'version', '-v'
        require 'lims_info/version'
        puts LimsInfo::VERSION
      when "order", "-o"
        LimsInfo::Order.start ARGV
      when "user", "-u"
        LimsInfo::User.start ARGV
      when "flowcell", "-f"
        LimsInfo::Flowcell.start ARGV
      when "encrypt"
        LimsInfo::Encrypt.obfuscate(ARGV.shift)
      else
        puts LimsInfo::Executable::HELP
      end
    end
  end
end

command = ARGV.shift
LimsInfo::Executable.execute(command, ARGV)
